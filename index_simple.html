<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç –≤—Ö–æ–¥–∞</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        .hidden { display: none !important; }
        .visible { display: block !important; }
        button { padding: 10px 20px; margin: 5px; }
        input { padding: 8px; margin: 5px; width: 200px; }
        .log { background: #f8f9fa; padding: 10px; margin: 10px 0; border-radius: 4px; }
        .success { background-color: #d4edda; }
        .error { background-color: #f8d7da; }
        .info { background-color: #d1ecf1; }
    </style>
</head>
<body>
    <h1>üß™ –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç –≤—Ö–æ–¥–∞</h1>
    
    <!-- –§–æ—Ä–º—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
    <div id="authForms" class="section">
        <h2>üîê –§–æ—Ä–º—ã –≤—Ö–æ–¥–∞</h2>
        
        <div id="loginForm" class="auth-form">
            <h3>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h3>
            <form id="loginFormElement">
                <input type="email" id="loginEmail" placeholder="Email" value="test@example.com">
                <input type="password" id="loginPassword" placeholder="–ü–∞—Ä–æ–ª—å" value="testpass123">
                <button type="submit">–í–æ–π—Ç–∏</button>
            </form>
        </div>
        
        <div id="registerForm" class="auth-form hidden">
            <h3>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
            <form id="registerFormElement">
                <input type="email" id="registerEmail" placeholder="Email">
                <input type="password" id="registerPassword" placeholder="–ü–∞—Ä–æ–ª—å">
                <input type="password" id="confirmPassword" placeholder="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
            </form>
        </div>
        
        <button onclick="showTab('login')">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Ö–æ–¥</button>
        <button onclick="showTab('register')">–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é</button>
    </div>
    
    <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
    <div id="mainApp" class="section hidden">
        <h2>üéâ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>
        <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç!</p>
        <div id="userInfo">
            <p>Email: <span id="userEmail">–ù–µ —É–∫–∞–∑–∞–Ω</span></p>
        </div>
        <button onclick="handleLogout()">–í—ã–π—Ç–∏</button>
    </div>
    
    <!-- –õ–æ–≥–∏ -->
    <div class="section">
        <h3>üìä –õ–æ–≥–∏</h3>
        <button onclick="clearLogs()">–û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏</button>
        <div id="logs"></div>
    </div>
    
    <!-- –¢–µ—Å—Ç—ã -->
    <div class="section">
        <h3>üß™ –¢–µ—Å—Ç—ã</h3>
        <button onclick="testShowMainContent()">–¢–µ—Å—Ç showMainContent()</button>
        <button onclick="testHideMainContent()">–¢–µ—Å—Ç hideMainContent()</button>
        <button onclick="checkVariables()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ</button>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentUser = null;
        let isAuthenticated = false;
        
        // –§—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logDiv = document.createElement('div');
            logDiv.innerHTML = `[${timestamp}] ${message}`;
            logDiv.className = `${type} log`;
            
            const logsContainer = document.getElementById('logs');
            logsContainer.appendChild(logDiv);
            console.log(message);
        }
        
        // –§—É–Ω–∫—Ü–∏–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
        async function handleLogin(event) {
            event.preventDefault();
            log('üîÑ –ù–∞—á–∏–Ω–∞–µ–º –≤—Ö–æ–¥...', 'info');
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                log('‚ùå –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'error');
                return;
            }
            
            try {
                // –°–∏–º—É–ª–∏—Ä—É–µ–º —É—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥
                log('‚úÖ –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ!', 'success');
                
                // –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                currentUser = {
                    email: email,
                    id: 'test-user-' + Date.now(),
                    created_at: new Date().toISOString()
                };
                isAuthenticated = true;
                
                log(`üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω: ${JSON.stringify(currentUser)}`, 'success');
                log(`üîê isAuthenticated: ${isAuthenticated}`, 'success');
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç
                showMainContent();
                
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ${error.message}`, 'error');
            }
        }
        
        async function handleRegister(event) {
            event.preventDefault();
            log('üîÑ –ù–∞—á–∏–Ω–∞–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é...', 'info');
            
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (!email || !password || !confirmPassword) {
                log('‚ùå –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                log('‚ùå –ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç', 'error');
                return;
            }
            
            if (password.length < 6) {
                log('‚ùå –ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤', 'error');
                return;
            }
            
            try {
                log('‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!', 'success');
                showTab('login');
                
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: ${error.message}`, 'error');
            }
        }
        
        async function handleLogout() {
            log('üîÑ –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã...', 'info');
            
            currentUser = null;
            isAuthenticated = false;
            
            log('‚úÖ –í—ã—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω', 'success');
            hideMainContent();
        }
        
        // –§—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        function showMainContent() {
            log('üîÑ showMainContent() –≤—ã–∑–≤–∞–Ω–∞', 'info');
            log(`üìß currentUser: ${currentUser ? currentUser.email : 'null'}`, 'info');
            log(`üîê isAuthenticated: ${isAuthenticated}`, 'info');
            
            try {
                const authForms = document.getElementById('authForms');
                const mainApp = document.getElementById('mainApp');
                const userInfo = document.getElementById('userInfo');
                const userEmail = document.getElementById('userEmail');
                
                log('üîç –ù–∞–π–¥–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:', 'info');
                log(`- authForms: ${authForms ? '–Ω–∞–π–¥–µ–Ω' : '–ù–ï –ù–ê–ô–î–ï–ù'}`, authForms ? 'success' : 'error');
                log(`- mainApp: ${mainApp ? '–Ω–∞–π–¥–µ–Ω' : '–ù–ï –ù–ê–ô–î–ï–ù'}`, mainApp ? 'success' : 'error');
                log(`- userInfo: ${userInfo ? '–Ω–∞–π–¥–µ–Ω' : '–ù–ï –ù–ê–ô–î–ï–ù'}`, userInfo ? 'success' : 'error');
                log(`- userEmail: ${userEmail ? '–Ω–∞–π–¥–µ–Ω' : '–ù–ï –ù–ê–ô–î–ï–ù'}`, userEmail ? 'success' : 'error');
                
                if (authForms) {
                    authForms.classList.add('hidden');
                    log('‚úÖ authForms —Å–∫—Ä—ã—Ç', 'success');
                } else {
                    log('‚ùå authForms –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
                }
                
                if (mainApp) {
                    mainApp.classList.remove('hidden');
                    log('‚úÖ mainApp –ø–æ–∫–∞–∑–∞–Ω', 'success');
                } else {
                    log('‚ùå mainApp –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
                }
                
                if (userInfo) {
                    userInfo.style.display = 'block';
                    log('‚úÖ userInfo –ø–æ–∫–∞–∑–∞–Ω', 'success');
                } else {
                    log('‚ùå userInfo –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
                }
                
                if (userEmail && currentUser) {
                    userEmail.textContent = currentUser.email;
                    log(`‚úÖ userEmail –æ–±–Ω–æ–≤–ª–µ–Ω: ${userEmail.textContent}`, 'success');
                } else {
                    log('‚ùå userEmail –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ currentUser –ø—É—Å—Ç–æ–π', 'error');
                }
                
                log('üéâ showMainContent() –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ', 'success');
                
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ –≤ showMainContent(): ${error.message}`, 'error');
            }
        }
        
        function hideMainContent() {
            log('üîÑ hideMainContent() –≤—ã–∑–≤–∞–Ω–∞', 'info');
            
            try {
                const authForms = document.getElementById('authForms');
                const mainApp = document.getElementById('mainApp');
                const userInfo = document.getElementById('userInfo');
                
                if (authForms) {
                    authForms.classList.remove('hidden');
                    log('‚úÖ authForms –ø–æ–∫–∞–∑–∞–Ω', 'success');
                }
                
                if (mainApp) {
                    mainApp.classList.add('hidden');
                    log('‚úÖ mainApp —Å–∫—Ä—ã—Ç', 'success');
                }
                
                if (userInfo) {
                    userInfo.style.display = 'none';
                    log('‚úÖ userInfo —Å–∫—Ä—ã—Ç', 'success');
                }
                
                log('üéâ hideMainContent() –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ', 'success');
                
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ –≤ hideMainContent(): ${error.message}`, 'error');
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫
        function showTab(tabName) {
            log(`üîÑ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É: ${tabName}`, 'info');
            
            try {
                // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Ñ–æ—Ä–º—ã
                const forms = document.querySelectorAll('.auth-form');
                forms.forEach(form => {
                    form.classList.add('hidden');
                });
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é —Ñ–æ—Ä–º—É
                const targetForm = document.getElementById(tabName + 'Form');
                if (targetForm) {
                    targetForm.classList.remove('hidden');
                    log(`‚úÖ –ü–æ–∫–∞–∑–∞–Ω–∞ —Ñ–æ—Ä–º–∞: ${tabName}`, 'success');
                } else {
                    log(`‚ùå –§–æ—Ä–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: ${tabName}`, 'error');
                }
                
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ –≤ showTab(): ${error.message}`, 'error');
            }
        }
        
        // –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function testShowMainContent() {
            log('üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º showMainContent()...', 'info');
            currentUser = { email: 'test@example.com', id: 'test' };
            isAuthenticated = true;
            showMainContent();
        }
        
        function testHideMainContent() {
            log('üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º hideMainContent()...', 'info');
            hideMainContent();
        }
        
        function checkVariables() {
            log('üìä –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ...', 'info');
            log(`üë§ currentUser: ${currentUser ? JSON.stringify(currentUser) : 'null'}`, 'info');
            log(`üîê isAuthenticated: ${isAuthenticated}`, 'info');
        }
        
        function clearLogs() {
            document.getElementById('logs').innerHTML = '';
            log('üßπ –õ–æ–≥–∏ –æ—á–∏—â–µ–Ω—ã', 'info');
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        document.getElementById('loginFormElement').addEventListener('submit', handleLogin);
        document.getElementById('registerFormElement').addEventListener('submit', handleRegister);
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        log('üöÄ –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞', 'success');
        log('üìã –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é', 'info');
        showTab('login');
    </script>
</body>
</html>
