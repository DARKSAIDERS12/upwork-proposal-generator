<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        .log { background: #f8f9fa; padding: 10px; border-radius: 3px; margin: 10px 0; font-family: monospace; white-space: pre-wrap; max-height: 200px; overflow-y: auto; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; background: #007bff; color: white; border: none; border-radius: 5px; }
        button:hover { background: #0056b3; }
        .btn-success { background: #28a745; }
        .btn-danger { background: #dc3545; }
        h1 { color: #333; text-align: center; }
        h3 { color: #555; }
        .status { padding: 10px; border-radius: 5px; margin: 10px 0; }
        .status.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .status.error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .status.info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ –¢–µ—Å—Ç –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ —Å–∏—Å—Ç–µ–º—ã</h1>
        
        <div class="test-section info">
            <h3>üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
            <p>–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é —Å–∏—Å—Ç–µ–º—ã –±–µ–∑ –ø—Ä–æ–±–ª–µ–º —Å –ë–î.</p>
            <p><strong>–í—Ä–µ–º—è:</strong> <span id="currentTime"></span></p>
        </div>

        <div class="test-section">
            <h3>üöÄ –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏</h3>
            <button onclick="testLoading()">–¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏</button>
            <div id="loadingResult" class="log"></div>
        </div>

        <div class="test-section">
            <h3>üîó –°—Å—ã–ª–∫–∏ –Ω–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
            <div class="status info">
                <strong>–û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:</strong> <a href="index.html" target="_blank">index.html</a> (–Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)
            </div>
            <div class="status info">
                <strong>–°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è:</strong> <a href="index_old.html" target="_blank">index_old.html</a> (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è)
            </div>
            <div class="test-section">
                <h3>üìÅ –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞</h3>
                <button onclick="listFiles()">–ü–æ–∫–∞–∑–∞—Ç—å —Ñ–∞–π–ª—ã</button>
                <div id="filesResult" class="log"></div>
            </div>
        </div>

        <div class="test-section">
            <h3>‚úÖ –°—Ç–∞—Ç—É—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π</h3>
            <div class="status success">
                <strong>‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:</strong> –ü—Ä–æ–±–ª–µ–º–∞ —Å –∫–æ–ª–æ–Ω–∫–æ–π daily_remaining
            </div>
            <div class="status success">
                <strong>‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:</strong> –§—É–Ω–∫—Ü–∏—è saveUserProfile –æ—Ç–∫–ª—é—á–µ–Ω–∞
            </div>
            <div class="status success">
                <strong>‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:</strong> –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤)
            </div>
            <div class="status success">
                <strong>‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:</strong> –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏
            </div>
        </div>

        <div class="test-section">
            <h3>üßπ –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞</h3>
            <button onclick="clearCache()" class="btn-danger">–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞</button>
            <div id="cacheResult" class="log"></div>
        </div>
    </div>

    <script>
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è
        function updateTime() {
            document.getElementById('currentTime').textContent = new Date().toLocaleString();
        }
        updateTime();
        setInterval(updateTime, 1000);

        function log(elementId, message) {
            const element = document.getElementById(elementId);
            const timestamp = new Date().toLocaleTimeString();
            element.textContent += `[${timestamp}] ${message}\n`;
            element.scrollTop = element.scrollHeight;
        }

        function testLoading() {
            const logElement = document.getElementById('loadingResult');
            logElement.textContent = '';
            
            log(logElement, 'üîÑ –¢–µ—Å—Ç–∏—Ä—É–µ–º –∑–∞–≥—Ä—É–∑–∫—É –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏...');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
            const elements = ['container', 'currentTime'];
            let allElementsExist = true;
            
            elements.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    log(logElement, `‚úÖ –≠–ª–µ–º–µ–Ω—Ç ${id} –Ω–∞–π–¥–µ–Ω`);
                } else {
                    log(logElement, `‚ùå –≠–ª–µ–º–µ–Ω—Ç ${id} –Ω–µ –Ω–∞–π–¥–µ–Ω`);
                    allElementsExist = false;
                }
            });
            
            if (allElementsExist) {
                log(logElement, '‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
                log(logElement, '‚úÖ –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ');
            } else {
                log(logElement, '‚ùå –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
            }
        }

        function listFiles() {
            const logElement = document.getElementById('filesResult');
            logElement.textContent = '';
            
            log(logElement, 'üìÅ –°–ø–∏—Å–æ–∫ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞:');
            log(logElement, '‚úÖ index.html - –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞)');
            log(logElement, '‚ö†Ô∏è index_old.html - —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è (—Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏)');
            log(logElement, '‚úÖ auth.js - –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è (–±–µ–∑ –ø—Ä–æ–±–ª–µ–º —Å –ë–î)');
            log(logElement, '‚ö†Ô∏è auth_old.js - —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è (—Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏)');
            log(logElement, '‚úÖ styles.css - —Å—Ç–∏–ª–∏');
            log(logElement, '‚úÖ test_new_version.html - —ç—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞');
        }

        function clearCache() {
            const logElement = document.getElementById('cacheResult');
            logElement.textContent = '';
            
            log(logElement, 'üßπ –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞...');
            log(logElement, '‚ÑπÔ∏è –î–ª—è –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞:');
            log(logElement, '  1. –ù–∞–∂–º–∏—Ç–µ Ctrl+Shift+Delete (–∏–ª–∏ Cmd+Shift+Delete –Ω–∞ Mac)');
            log(logElement, '  2. –í—ã–±–µ—Ä–∏—Ç–µ "–í—Å–µ –≤—Ä–µ–º—è"');
            log(logElement, '  3. –û—Ç–º–µ—Ç—å—Ç–µ "–ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Ñ–∞–π–ª—ã"');
            log(logElement, '  4. –ù–∞–∂–º–∏—Ç–µ "–£–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ"');
            log(logElement, '  5. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É');
            
            // –ü—ã—Ç–∞–µ–º—Å—è –æ—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ
            if ('caches' in window) {
                caches.keys().then(names => {
                    names.forEach(name => {
                        caches.delete(name);
                    });
                    log(logElement, '‚úÖ –ö—ç—à Service Worker –æ—á–∏—â–µ–Ω');
                });
            }
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            setTimeout(() => {
                testLoading();
                listFiles();
            }, 1000);
        });
    </script>
</body>
</html>
